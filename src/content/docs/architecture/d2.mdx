---
title: How I structure D2 files
description: How I structure my D2 files.
---

import { Code } from '@astrojs/starlight/components';
import exampleDiagram from './src/content/docs/architecture/d2_example.d2?raw';

I use [D2](https://d2lang.com/) for diagrams in my documentation.
To keep things organized, I structure my D2 files like this:

1. vars and classes
2. diagram elements or [shapes](https://d2lang.com/tour/shapes/)
3. relationships between elements or [connections](https://d2lang.com/tour/connections/)
4. tala layout positioning directives

This is how I create new D2 diagram:

1. Copy my D2 template that I keep in separate file.
2. Define elements.
3. Add relationships and see how tala layout positions them automatically.
4. Adjust positions with `top` and `left` directives.

Example D2 file:

<Code code={exampleDiagram} lang="d2" title="example.d2" />